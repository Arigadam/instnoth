# –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤ .instnoth

–§–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.instnoth` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞

–§–∞–π–ª `.instnoth` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ–∫—Ü–∏–π:

1. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç–∞** ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–∫–µ—Ç–µ
2. **–§–∞–∑—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏** ‚Äî —ç—Ç–∞–ø—ã —Å–∏–º—É–ª—è—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```instnoth
# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å #

package: "–ò–º—è –ø–∞–∫–µ—Ç–∞"
version: "1.0.0"
description: "–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞"
author: "–ê–≤—Ç–æ—Ä"

phase "–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–∑—ã" {
    # –∫–æ–º–∞–Ω–¥—ã
}
```

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç–∞

| –ü–æ–ª–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------------|----------|
| `package` | –î–∞ | –ò–º—è –ø–∞–∫–µ—Ç–∞ |
| `version` | –ù–µ—Ç | –í–µ—Ä—Å–∏—è –ø–∞–∫–µ—Ç–∞ |
| `description` | –ù–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ |
| `author` | –ù–µ—Ç | –ê–≤—Ç–æ—Ä –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è |
| `depends` | –ù–µ—Ç | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–¥—Ä—É–≥–∏–µ .instnoth —Ñ–∞–π–ª—ã) |

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```instnoth
# –û–¥–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
depends: "python.instnoth"

# –ù–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
depends: "python.instnoth" "nodejs.instnoth" "docker.instnoth"

# –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
depends: "../base/core.instnoth" "/opt/instnoth/extras.instnoth"
```

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º –ø–∞–∫–µ—Ç–æ–º. –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫—É.

## –ö–æ–º–∞–Ω–¥—ã

### –°–æ–æ–±—â–µ–Ω–∏—è –∏ –≤—ã–≤–æ–¥

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `message "—Ç–µ–∫—Å—Ç"` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ | `message "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã..."` |
| `success "—Ç–µ–∫—Å—Ç"` | –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ (–∑–µ–ª—ë–Ω–æ–µ) | `success "–ì–æ—Ç–æ–≤–æ!"` |
| `warning "—Ç–µ–∫—Å—Ç"` | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (–∂—ë–ª—Ç–æ–µ) | `warning "–ù–∞–π–¥–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è"` |
| `error "—Ç–µ–∫—Å—Ç"` | –û—à–∏–±–∫–∞ (–∫—Ä–∞—Å–Ω–æ–µ) | `error "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"` |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `delay N` | –ü–∞—É–∑–∞ –Ω–∞ N –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ | `delay 500` |
| `progress N` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (0-100%) | `progress 50` |

### –î–µ—Ç–µ–∫—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã (—Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `detect_cpu` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (—Ä–∞–Ω–¥–æ–º–Ω—ã–π CPU) |
| `detect_memory` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ RAM (—Ä–∞–Ω–¥–æ–º–Ω—ã–π –æ–±—ä—ë–º –∏ —Ç–∏–ø) |
| `detect_disk` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è (—Ä–∞–Ω–¥–æ–º–Ω—ã–π –¥–∏—Å–∫) |
| `detect_gpu` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã (—Ä–∞–Ω–¥–æ–º–Ω–∞—è GPU) |
| `detect_network` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞ |
| `detect_os` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –û–° |
| `detect_kernel` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ —è–¥—Ä–∞ |
| `detect_bios` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ BIOS/UEFI |
| `scan_hardware` | –ü–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è |
| `detect_drivers` | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥—Ä–∞–π–≤–µ—Ä–æ–≤ |

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ `detect_cpu`:**
```
  üîç –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ ... 
    ‚îú –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å: AMD
    ‚îú –ú–æ–¥–µ–ª—å: Ryzen 9 7950X
    ‚îú –Ø–¥—Ä–∞: 16 —è–¥–µ—Ä
    ‚îî –ß–∞—Å—Ç–æ—Ç–∞: 5700 MHz
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–µ–Ω—á–º–∞—Ä–∫–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `run_test "–∏–º—è" duration=N` | –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º | `run_test "Memory check" duration=1000` |
| `test_hardware "–∫–æ–º–ø–æ–Ω–µ–Ω—Ç"` | –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ | `test_hardware "memory"` |
| `benchmark_cpu` | CPU –±–µ–Ω—á–º–∞—Ä–∫ | `benchmark_cpu` |
| `benchmark_memory` | –¢–µ—Å—Ç –ø–∞–º—è—Ç–∏ | `benchmark_memory` |
| `benchmark_disk` | –¢–µ—Å—Ç –¥–∏—Å–∫–∞ | `benchmark_disk` |

### –†–∞–±–æ—Ç–∞ —Å —è–¥—Ä–æ–º

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `load_module "–º–æ–¥—É–ª—å"` | –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è —è–¥—Ä–∞ | `load_module "nvidia"` |
| `unload_module "–º–æ–¥—É–ª—å"` | –í—ã–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è | `unload_module "nouveau"` |
| `update_initramfs` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ initramfs | `update_initramfs` |
| `update_grub` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ GRUB | `update_grub` |
| `compile_kernel "–≤–µ—Ä—Å–∏—è"` | –ö–æ–º–ø–∏–ª—è—Ü–∏—è —è–¥—Ä–∞ | `compile_kernel "6.6.8"` |

### –†–∞–±–æ—Ç–∞ —Å –¥–∏—Å–∫–∞–º–∏ –∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `create_partition "—É—Å—Ç—Ä" size="—Ä–∞–∑–º–µ—Ä"` | –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ | `create_partition "/dev/sda1" size="100GiB"` |
| `format "—É—Å—Ç—Ä" fs="—Ç–∏–ø"` | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | `format "/dev/sda1" fs="ext4"` |
| `mount "—É—Å—Ç—Ä" to="—Ç–æ—á–∫–∞"` | –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | `mount "/dev/sda1" to="/mnt"` |
| `unmount "—Ç–æ—á–∫–∞"` | –†–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | `unmount "/mnt"` |
| `generate_fstab` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è fstab | `generate_fstab` |

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `set_hostname "–∏–º—è"` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ hostname | `set_hostname "mypc"` |
| `set_timezone "–∑–æ–Ω–∞"` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ | `set_timezone "Europe/Moscow"` |
| `set_locale "–ª–æ–∫–∞–ª—å"` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–∫–∞–ª–∏ | `set_locale "ru_RU.UTF-8"` |
| `sync_time` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ NTP | `sync_time` |

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ø–∞—Ä–æ–ª–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `create_user "–∏–º—è" groups="–≥—Ä—É–ø–ø—ã"` | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `create_user "user" groups="wheel,audio"` |
| `set_password "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è | `set_password "root"` |

### –°–µ—Ä–≤–∏—Å—ã systemd

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `enable_service "—Å–µ—Ä–≤–∏—Å"` | –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ | `enable_service "NetworkManager"` |
| `disable_service "—Å–µ—Ä–≤–∏—Å"` | –û—Ç–∫–ª—é—á–µ–Ω–∏–µ | `disable_service "bluetooth"` |
| `start_service "—Å–µ—Ä–≤–∏—Å"` | –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ | `start_service "sshd"` |
| `stop_service "—Å–µ—Ä–≤–∏—Å"` | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ | `stop_service "cups"` |

### –ó–∞–≥—Ä—É–∑—á–∏–∫

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `install_bootloader "—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ GRUB | `install_bootloader "/dev/sda"` |

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `install_packages "—Å–ø–∏—Å–æ–∫"` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ | `install_packages "vim git zsh"` |
| `install_dep "–ø–∞–∫–µ—Ç" version="–≤–µ—Ä"` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | `install_dep "openssl" version="3.0"` |
| `update_system` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã | `update_system` |
| `install_driver "–¥—Ä–∞–π–≤–µ—Ä"` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—Ä–∞–π–≤–µ—Ä–∞ | `install_driver "nvidia-dkms"` |

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `check_integrity "–ø—É—Ç—å"` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ | `check_integrity "/boot/vmlinuz"` |
| `verify_signature "—Ñ–∞–π–ª"` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ | `verify_signature "package.sig"` |
| `check_dep "–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | `check_dep "glibc"` |

### –°–µ—Ç—å

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `network_config "–∏–Ω—Ç–µ—Ä—Ñ" config="—Ç–∏–ø"` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏ | `network_config "eth0" config="dhcp"` |
| `firewall_rule "–ø—Ä–∞–≤–∏–ª–æ"` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ firewall | `firewall_rule "allow 22/tcp"` |

### –§–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `create_dir "–ø—É—Ç—å"` | –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ | `create_dir "/etc/myapp"` |
| `copy_file "–æ—Ç–∫—É–¥–∞" to="–∫—É–¥–∞"` | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ | `copy_file "/tmp/file" to="/etc/file"` |
| `symlink "–æ—Ç–∫—É–¥–∞" to="–∫—É–¥–∞"` | –°–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ | `symlink "/bin/python3" to="/bin/python"` |
| `set_permission "–ø—É—Ç—å" mode="–ø—Ä–∞–≤–∞"` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ | `set_permission "/bin/app" mode="755"` |
| `write_config "–ø—É—Ç—å" content="—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ"` | –ó–∞–ø–∏—Å—å –∫–æ–Ω—Ñ–∏–≥–∞ | `write_config "/etc/conf" content="key=value"` |

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `download "url" size=N` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ | `download "https://..." size=10240` |
| `extract "–∞—Ä—Ö–∏–≤" to="–ø—É—Ç—å"` | –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–∞ | `extract "/tmp/arch.tar.gz" to="/opt"` |

### –°–∫—Ä–∏–ø—Ç—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `run_script "–∫–æ–º–∞–Ω–¥–∞"` | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ | `run_script "make install"` |
| `configure key="–∫–ª—é—á" value="–∑–Ω–∞—á–µ–Ω–∏–µ"` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | `configure key="DEBUG" value="false"` |

### –û—á–∏—Å—Ç–∫–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `cleanup` | –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ |

## –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Linux

```instnoth
package: "Arch Linux"
version: "2024.01"
description: "Rolling-release –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ Linux"
author: "Arch Linux Team"

phase "–î–µ—Ç–µ–∫—Ü–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è" {
    message "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã..."
    scan_hardware
    detect_cpu
    detect_memory
    detect_disk
    progress 10
}

phase "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" {
    run_test "–ü–∞–º—è—Ç—å" duration=1000
    benchmark_cpu
    benchmark_disk
    progress 20
}

phase "–†–∞–∑–º–µ—Ç–∫–∞ –¥–∏—Å–∫–∞" {
    create_partition "/dev/sda1" size="512MiB"
    format "/dev/sda1" fs="vfat"
    create_partition "/dev/sda2" size="100%"
    format "/dev/sda2" fs="ext4"
    mount "/dev/sda2" to="/mnt"
    progress 40
}

phase "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã" {
    install_packages "base linux linux-firmware"
    generate_fstab
    progress 60
}

phase "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã" {
    set_hostname "archlinux"
    set_timezone "Europe/Moscow"
    set_locale "ru_RU.UTF-8"
    create_user "user" groups="wheel"
    set_password "user"
    progress 80
}

phase "–ó–∞–≥—Ä—É–∑—á–∏–∫" {
    install_bootloader "/dev/sda"
    update_grub
    progress 90
}

phase "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ" {
    enable_service "NetworkManager"
    update_initramfs
    check_integrity "/boot/vmlinuz-linux"
    unmount "/mnt"
    progress 100
    success "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
}
```

## –ó–∞–ø—É—Å–∫

```bash
# –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Å –∞–Ω–∏–º–∞—Ü–∏–µ–π)
instnoth --file myinstall.instnoth

# –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º (–±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫)
instnoth --file myinstall.instnoth --quick

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
instnoth --file myinstall.instnoth --verbose

# –°–ø–∏—Å–æ–∫ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
instnoth --list-builtin
```

## –°–æ–≤–µ—Ç—ã

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–∑—ã –ª–æ–≥–∏—á–µ—Å–∫–∏** ‚Äî –∫–∞–∂–¥–∞—è —Ñ–∞–∑–∞ = –æ–¥–∏–Ω —ç—Ç–∞–ø —É—Å—Ç–∞–Ω–æ–≤–∫–∏
2. **–î–æ–±–∞–≤–ª—è–π—Ç–µ progress** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
3. **–î–µ—Ç–µ–∫—Ü–∏—è —Å–ª—É—á–∞–π–Ω–∞** ‚Äî `detect_*` –∫–æ–º–∞–Ω–¥—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
4. **delay —Ä–∞–∑—É–º–Ω–æ** ‚Äî –Ω–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ, –Ω–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
5. **–ö–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥** ‚Äî —Å—Ç—Ä–æ–∫–∏ —Å `#` –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
